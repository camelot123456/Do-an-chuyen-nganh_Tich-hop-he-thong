<th:block layout:fragment="content" layout:decorate="~{home/layouts/index}">
    <div class="container">
        <h3 class="text-primary" style="margin-top: 200px">CHI TIẾT LOẠI PHÒNG</h3>
        <hr>
        <div class="vstack gap-3">
            <div class="hstack gap-3">
                <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel" style="width: 70%">
                    <div class="carousel-indicators">
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0"
                            class="active" aria-current="true" aria-label="Slide 1"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                            aria-label="Slide 2"></button>
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                            aria-label="Slide 3"></button>
                    </div>
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="https://fiboholiday.webhotel.vn/files/images/Room/deluxe/406_5.jpg"
                                class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="https://fiboholiday.webhotel.vn/files/images/Room/deluxe/406_5.jpg"
                                class="d-block w-100" alt="...">
                        </div>
                        <div class="carousel-item">
                            <img src="https://fiboholiday.webhotel.vn/files/images/Room/deluxe/406_11.jpg"
                                class="d-block w-100" alt="...">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                        data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                        data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>

                <div class="vstack gap-2 border bg-light shadow p-3" style="width: 30%">
                    <input type="hidden" id="id_room_type" th:value="${room_type.id}">
                    <h2 class="text-center text-primary">[[${room_type.name}]]</h2>
                    <h1 class="text-center fs-1">$[[${room_type.price}]]/Đêm</h1>
                    <div class="vstack gap-1">
                        <div class="form-floating w-100">
                            <input type="datetime-local" class="form-control" id="start-date" placeholder="Ngày đặt"
                                name="start-date" required>
                            <label for="start-date">Ngày đặt</label>
                            <p class="text-danger text-center" id="start-date-message" style="font-size: 12px"></p>
                        </div>
                        <div class="form-floating w-100">
                            <input type="datetime-local" class="form-control" id="end-date" placeholder="Ngày trả"
                                name="end-date" required>
                            <label for="end-date">Ngày trả</label>
                            <p class="text-danger text-center" id="end-date-message" style="font-size: 12px"></p>
                        </div>
                        <div class="hstack gap-3">
                            <div class="form-floating w-50">
                                <input type="number" class="form-control" id="adults" placeholder="Người lớn"
                                    name="adults" required min="1" max="20" value="1">
                                <label for="adults">Người lớn</label>
                                <p class="text-danger text-center" id="adults-message" style="font-size: 12px"></p>
                            </div>
                            <div class="form-floating w-50">
                                <input type="number" class="form-control" id="children" placeholder="Trẻ em"
                                    name="children" required min="1" max="20" value="1">
                                <label for="children">Trẻ em</label>
                                <p class="text-danger text-center" id="children-message" style="font-size: 12px"></p>
                            </div>
                        </div>
                    </div>
                    <button type="button" id="btn-book-now" class="btn btn-warning btn-lg">CHỌN PHÒNG NGAY</button>
                </div>
            </div>

            <ul class="nav nav-tabs" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab"
                        data-bs-target="#description" type="button" role="tab" aria-controls="description"
                        aria-selected="true">Mô tả</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="result-tab" data-bs-toggle="tab" data-bs-target="#result" type="button"
                        role="tab" aria-controls="result" aria-selected="false">Nhận xét</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="other-tab" data-bs-toggle="tab" data-bs-target="#other" type="button"
                        role="tab" aria-controls="other" aria-selected="false">Phòng khác</button>
                </li>
            </ul>
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="description" role="tabpanel"
                    aria-labelledby="description-tab">
                    <h3>Nội dung của phòng đơn</h3>
                </div>

                <div class="tab-pane fade" id="result" role="tabpanel" aria-labelledby="result-tab">
                    <div class="list-group overflow-auto">
                        <div class="list-group-item list-group-item-action hstack gap-3" aria-current="true">
                            <img class="rounded-circle" style="width: 80px;"
                                src="https://hoc24.vn/images/avt/avt6384329_256by256.jpg" alt="">
                            <div class=" w-100">
                                <div class="d-flex w-100 justify-content-between">
                                    <h5 class="mb-1">Lee Min Hoo</h5>
                                    <small>3 days ago</small>
                                </div>
                                <p class="mb-1">Phòng rộng sạch đẹp Thoáng mát, xứng đáng 5 sao nhé :))</p>
                                <div class="text-warning">
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                    <i class="fa fa-star" aria-hidden="true"></i>
                                    <i class="fa fa-star-half-o" aria-hidden="true"></i>
                                    <i class="fa fa-star-o" aria-hidden="true"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="tab-pane fade" id="other" role="tabpanel" aria-labelledby="other-tab">...</div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog" style="max-width: 1000px; min-width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="staticBackdropLabel">Danh sách các phòng loại [[${room_type.name}]]</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="modal-room-list" class="overflow-auto">
                        <div class="d-flex position-relative">
                            <img style="width: 35%"
                                src="https://fiboholiday.webhotel.vn/files/images/Room/deluxe/406_11.jpg"
                                class="flex-shrink-0 me-3" alt="...">
                            <div>
                                <h5 class="mt-0">Custom component with stretched link</h5>
                                <p>This is some placeholder content for the custom component. It is intended to mimic
                                    what some real-world content would look like, and we're using it here to give the
                                    component a bit of body and size.</p>
                                <a href="#" class="stretched-link">Đặt ngay</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Understood</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            var $ = document.querySelector.bind(document)
            var $$ = document.querySelectorAll.bind(document)

            var modalRoomList = $("#modal-room-list")

            var btnBookNow = $('#btn-book-now')
            var myModal = new bootstrap.Modal($('#staticBackdrop'), {
                keyboard: false
            })

            var adultsNum = $('#adults')
            var childrenNum = $('#children')

            var adultsValue
            var childrenValue
            adultsNum.addEventListener('change', (e)=>{
                console.log(Number(adultsNum.value))
                adultsValue = Number(adultsNum.value)
            })
            childrenNum.addEventListener('change', (e)=>{
                console.log(Number(childrenNum.value))
                childrenValue = Number(childrenNum.value)
            })


            btnBookNow.addEventListener('click', (e) => {
                
                console.log({
                    adultsNum: e.adultsValue,
                    childrenNum: childrenValue
                })
                
                // var sumCustomers = parseInt(adultsNum.value) + parseInt(childrenNum.value)
                // var url = `http://localhost:8081/api/room/${$('#id_room_type').value}/${sumCustomers}`
                // console.log({sumCustomers, url})
                // console.log({adults: +$('#adults').value, children: +$('#children').value})
                // fetch(url)
                //     .then(resp => resp.json())
                //     .then(rooms => {
                    //         console.log(rooms);
                    //     })
                    myModal.show()
            })

        })
    </script>

</th:block>